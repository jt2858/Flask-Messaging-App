{%include 'layout.html' %}
<script src="{{ url_for('static', filename='js/messenger.js') }}"></script>
<div id="newchatmenu" tabindex="0">
    <input type="text" oninput="searchusers()" id="searchusers"><i class="material-icons">search</i>
    <ul id="userlist">
        
    </ul>
    <button>create chat</button>
</div>
<div id="container2">
    <div id="chatselectorsettings">
        <p>{{username}}</p>
        <i class="material-icons" onclick="shownewchatmenu()">add</i>
    </div>
    <div id="chatselector">
        <ul>
            {% for chat in existing_chats %}
                <li onclick='if (event.target==event.currentTarget){window.location.href="{{url_for('messenger', chatid=chat[3]) }}"}'>
                    <img src="{{chat[2]}}">
                    <p>{{chat[0]}}</p>
                    <div>
                        <i class="material-icons" onblur="console.log(document.activeElement)" onclick="chatselectoroptions()" tabindex="1">more_horiz</i>
                        <i class="material-icons" onclick="">push_pin</i>
                        <i class="material-icons" onmousedown='window.location.href=apiurl + "?deletechat=" + "{{chat[3]}}"'>delete</i>
                    </div>
                </li>
            {% endfor %}
        </ul>
        
    </div>
    <div id="chat">
        <ul>
            {% for message in message_history %}
                {% if message[0]==current_user %}
                    <li sent="True">
                {%else%}
                    <li received="True">
                {%endif%}
                    <p>{{message[1]}}</p>
                </li>
            {%endfor%}
        </ul>
        <div>
            <textarea id="messageinput"></textarea>
            <i class="material-icons">send</i>
        </div>
    </div>
</div>